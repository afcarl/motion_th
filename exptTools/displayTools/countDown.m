function countDown(display,startSecs,startScan)% function countDown(display,starSecs,startScan)%% startSecs is the (integer) number of seconds for the entire countdown sequence% startScan is the (real) number of seconds remaining in the countdown when scanner%   is to be started%% Purpose:  Counts down from secs to 1,%           displaying the numbers on the%           screen above the fixation point.%% Original author unknown% 6/2/99 David Ress & Ben Backus: replaced timing loop with a time-based%   loop instead of integer countdown, to allow use of real-valued scanner%   starting times.if ~exist('startScan', 'var')	startScan = -1;endloc = display.rect([3,4])/2;% Loop to display countdown and start scannerstartSecs = round(startSecs);    % Force to integerendTime = startSecs + getSecs;   % Time at which to end the countdownscanStarted = 0;currentDisplayNumber = startSecs;timeRemaining = startSecs;while timeRemaining > 0		% Check whether to start scanner		if ~scanStarted		if timeRemaining <= startScan			StartScan;			dispStringInCenter(display,'Start Scan',0.6,'white');			scanStarted = 1;		end	end	% Update countdown number, if it's time to do so	if ceil(timeRemaining) <= currentDisplayNumber		dispStringInCenter(display,num2str(currentDisplayNumber+1),0.5,'background');		dispStringInCenter(display,num2str(currentDisplayNumber),0.5,'white');		currentDisplayNumber = currentDisplayNumber-1;	end	timeRemaining =  endTime - getSecs;	end% Remove displayed elementsdispStringInCenter(display,'Start Scan',0.6,'background');dispStringInCenter(display,'1',0.5,'background');SCREEN(display.windowPtr,'TextSize',12);