function outImg = makeNAFCStim(display, leftImg, rightImg, eccenPix, blankColor)% % AUTHOR:  Dougherty% DATE:    10.15.98% PURPOSE:%   Take two images and place them at their respective% locations, 2*eccenPix apart.%   The present version of this routine assumes the two stimuli% have the same vertical sizes and positions.  It also assumes the% stimuli fall to either side of the center of the display.% Find the separation between the two stimuli by taking the% difference between their inside borders (the inside border of% the left stim is the position of its right edge; the inside% border of the right stim is the position of its left edge)if ~exist('blankColor')	blankColor = getReservedColor(display,'background');endleftWide = size(leftImg,2);rightWide = size(rightImg,2);height = size(leftImg,1);	% Assumes left and right height the sameif ~exist('eccenPix')	displayWidth = str2num(strtok(display.resolution,'x'));	leftPos = displayWidth/4;	rightPos = 3*displayWidth/4;	fillerPix = round ((rightPos-rightWide/2)-(leftPos+leftWide/2));else	fillerPix = round(eccenPix - (rightWide/2) + (eccenPix - leftWide/2));endif fillerPix<0	error('Your stimulus size is too big and/or eccentricity too small.');end	blankFiller = zeros (height, fillerPix) + blankColor;% Combine the stimuli together outImg = zeros(height, leftWide+fillerPix+rightWide, max(size(leftImg,3),size(rightImg,3)));for frameNum = 1:size(leftImg,3)	if frameNum<=size(leftImg,3)		l = leftImg(:,:,frameNum);	else		l = zeros(size(leftImg(:,:,1))) + blankColor;	end	if frameNum<=size(leftImg,3)		r = rightImg(:,:,frameNum);	else		r = zeros(size(rightImg(:,:,1))) + blankColor;	end		outImg(:,:,frameNum) = [l blankFiller r];end