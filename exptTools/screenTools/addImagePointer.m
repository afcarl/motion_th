function stimulus = addImagePointer(display, stimulus, image)%stimulus = addImagePointers(display, stimulus, image)%%This routine adds an image pointer to the end of the image pointer%list of a stimulus struct.  %%This is useful because you can create the images one at a time,%create a pointer to the image, then re-use the Matlab workspace%memory that held the image.%%DATE: 10/16/98%BY: Bill, Bob, and Benc = getReservedColor(display, 'background');if (size(stimulus,2)>1 | size(image,3)>1)	error('addImagePointer takes only one stimulus and one image');endif ~isfield(stimulus,'srcRect')	stimulus.srcRect = [0,0,size(image, 2), size(image, 1)];endif ~isfield(stimulus,'destRect')	stimulus.destRect = CenterRect(stimulus.srcRect, display.rect);endnumImagePtr = length(stimulus.imagePtr);stimulus.imagePtr(numImagePtr) = ...	SCREEN(display.windowPtr, 'OpenOffscreenWindow', c, stimulus.srcRect);SCREEN(stimulus(stimNum).imagePtr(imgNum), 'PutImage', double(image), stimulus.srcRect);