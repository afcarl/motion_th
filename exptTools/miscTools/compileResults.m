function [intensity,n,pc]=compileResults(results)tol = 1e-10;[sortedIntensities,id] = sort(results.intensity(:));intensity = [sortedIntensities(diff(sortedIntensities)>eps);sortedIntensities(length(sortedIntensities))];for i=1:length(intensity)	ids = (abs(results.intensity-intensity(i))<eps*2);	n(i) = sum(sum(ids));	pc(i) = sum(sum(results.response(ids)))/ n(i);endif sum(n) ~= prod(size(results.response))	disp('uh oh, compileResults miscounted');end