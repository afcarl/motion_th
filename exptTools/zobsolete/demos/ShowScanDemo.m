%ShowScanDemorunPriority = 7;%Generate a grating stimulusclear scan%Grating stimulus parameters.params = makeGratingParams;%Generate display structure%monitor = 'SanyoLCD';monitor = 'NecLcd2000';  %doesn't work.%monitor = 'Multiscan720';%position = 'outside bore';position = 'room 452';card = 'Radius10-bit';%card = 'BuiltIn8-bit';%resolution = '640x480, 67Hz';resolution = '832x624, 75Hz';display = initDisplayStruct(monitor,card,resolution,position);display.screenNumber=1;%first trial:  Counterphase Vertical grating%Create the trial structure%first stimulus has higher contrast (0.5)params.contrast = 0.5;scan.trial(1).stimulus(1) = makeFlickerGrating(display,params);%second stimulus has lower contrast (0.3)params.contrast = 0.3;scan.trial(1).stimulus(2) = makeFlickerGrating(display,params);scan.trial(1).ISI = 0.2;scan.trial(1).responseInterval = 0.25;% create background images/cmaps for ISI and ITI (nonstimulus periods)c=getReservedColor(display,'background');ydim=angle2pix(display,params.size(1));xdim=angle2pix(display,params.size(2));img=insertFixation(display,c*ones(ydim,xdim));scan.trial(1).ISIstimulus=createStimulusStruct(img,greyCmap(display),[1,-1]);%second trial: Moving Vertical grating%first stimulus has higher contrast (0.5)params.contrast = 0.5;scan.trial(2).stimulus(1) = makeDriftGrating(display,params);%second stimulus has lower contrast (0.3)params.contrast = 0.3;scan.trial(2).stimulus(2) = makeDriftGrating(display,params);scan.trial(2).ISI = 0.2;scan.trial(2).responseInterval = 0.25;scan.trial(2).ISIstimulus = scan.trial(1).ISIstimulus;%develop the rest of the scan structure.scan.ITI = 2;scan.trialNumberSeq = [1,1,1,2,2,2,1,1,1,2,2,2];%Open the screendisplay = openScreen(display);%Note: no need to store images off screen - showScan does this for you.%show the stimulusresponse =showScan(display,scan,runPriority)% Close the one on-screen and many off-screen windowsSCREEN('CloseAll');