%ShowStaircaseDemorunPriority = 0;%Generate a grating stimulusclear trial%Grating stimulus parameters.clear paramsparams = makeGratingParams;%Generate display structure%monitor = 'SanyoLCD';monitor = 'NecLcd2000';  %doesn't work.%monitor = 'Multiscan720';%position = 'outside bore';position = 'room 452';card = 'Radius10-bit';%card = 'BuiltIn8-bit';%resolution = '640x480, 67Hz';%resolution = '832x624, 75Hz';resolution = '1024x768, 75Hz';display = initDisplayStruct(monitor,card,resolution,position);display.screenNumber =1;   %should be 0 or 1  %Create the staircase structurestaircase.stimFunction = 'makeDriftGrating';staircase.stimParams = params;staircase.ISI = 0.2;staircase.responseInterval = NaN;staircase.numInterleaves = 2;staircase.numTrials = 15;staircase.logFlag = 1;staircase.nDown = 3;staircase.nUp = 1;staircase.intensityParamName = 'contrast';staircase.intensityRange = [0.25,0.35];staircase.startIntensity = 0.35;staircase.testIntensity = 0.25;staircase.numIntensitySteps = 8;% create background images/cmaps for ISI and ITI (nonstimulus periods)c=getReservedColor(display,'background');ydim=angle2pix(display,params.size(1));xdim=angle2pix(display,params.size(2));img=insertFixation(display,c*ones(ydim,xdim));staircase.ISIstimulus=createStimulusStruct(img,greyCmap(display),[-1,1]);%Open the screendisplay = openScreen(display);%show the stimulusresults =showStaircase(display,staircase,runPriority)% Close the one on-screen and many off-screen windowsSCREEN('CloseAll');if ~sum(sum(isnan(results.response)))	v=fitResultsPsycho(staircase,results);	figure(1)	plotResultsStaircase(staircase,results,v);	figure(2)	plotResultsPsycho(staircase,results,v);end