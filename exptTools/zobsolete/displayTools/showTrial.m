function response = showTrial(display,trial,runPriority)%response = showTrial(display,trial,runPriority)%need a case statement for trial.typeif ~exist('runPriority')	runPriority = 0;  %use the nicest priority by defaultend%choose which interval to show first.if rand(1)<0.5;	stimOrder = [1,2];else	stimOrder = [2,1];end%show the two trialsshowStimulus(display,trial.stimulus(stimOrder(1)),runPriority);if isfield(trial,'ISIstimulus')  showStimulus(display,trial.ISIstimulus,runPriority);else  SCREEN(display.windowPtr,'SetClut',greyCmap(display));endwaitTill(trial.ISI);showStimulus(display,trial.stimulus(stimOrder(2)),runPriority);if isfield(trial,'ISIstimulus')  showStimulus(display,trial.ISIstimulus,runPriority);else  SCREEN(display.windowPtr,'SetClut',greyCmap(display));endif isnan(trial.responseInterval)	key = getChar;else	key = waitTill(trial.responseInterval);end%deal with responseif isempty(key)	response = NaN;else	if (key == '1' & stimOrder(1) == 1) | ...	   (key == '2' & stimOrder(2) == 1)		response = 1;	elseif key == '*'		%exit		response = -1;		return	else		response = 0;	end	end%set up feedbackif response == 1	textStr = 'Yes';	textColorNum = findName(display.reservedColor,'white');elseif response == 0	textStr = 'No!';	textColorNum = findName(display.reservedColor,'black');else	textStr = 'XXX';	textColorNum = findName(display.reservedColor,'black');end%show feedbacktextLoc= display.rect(3:4)/2-[30,20];SCREEN(display.windowPtr,'TextSize',32);SCREEN(display.windowPtr,'DrawText',textStr,textLoc(1),textLoc(2),display.reservedColor(textColorNum).fbVal);waitTill(.1);%erase feedbackbkColorNum = findName(display.reservedColor,'background');SCREEN(display.windowPtr,'DrawText',textStr,textLoc(1),textLoc(2),display.reservedColor(bkColorNum).fbVal);