% DATE:  	02.13.98% AUTHOR: 	Heidi Baseler% PURPOSE:	Measures the SPECTRA of a display device%			Uses "cmeter" function written by D. Brainard for Matlab 5.1.%			Steps through calibration targets, reading data from the SpectraScan % 			PR650 colorimeter.% % HISTORY:	This script was modified from Xuemei Zhang's script "cmeterCalib.m" %			written in August, 1997 on Turquoise.% 			Adapted by HAB to calibrate NEC Flat Panel LCD Monitor with either %			vermillion in Jordan Hall or with ochre in the Lucas Center% To check monitor numbering, go to "Monitors & Sound" under Control Panels, select% "Arrange" and click on "Identify the monitors"% Generally, for NEC (2nd) monitor, use monitor = 1; % for Mac console monitor, use monitor = 0monitor = 1;% To select the spatial and temporal parameters on the NEC MultiSync LCD2000 monitor,% push the "PROCEED" button on monitor and scroll down to "Display Mode"synchFreq = 73.8		% Refresh rate of the NEC MultiSync LCD2000 - 02.12.98targetSize = [1024 1280];% Choose the gun values and maximum value you'd like to measure% Maximum value = 1023 for 10-bit board, 255 for 8-bit boardgunColors = [1 0 0; 0 1 0; 0 0 1; 1 1 1] * 1023;% Measure the spectra[gunSpects, wavelengths, gunXYZ] = cmeterNECspectra(targetSize, gunColors, monitor, synchFreq);% Plot the resultsplot(wavelengths,gunSpects(:,1),'r',wavelengths,gunSpects(:,2),'g',wavelengths,gunSpects(:,3),'b',wavelengths,gunSpects(:,4),'k')% Test for additivitytestw=sum((gunSpects(:,1:3)'));% First plot measured white spectrum (all guns on)figure; plot(wavelengths,gunSpects(:,4),'b')hold on% Then plot sum of 3 gun spectraplot(wavelengths,testw,'r')title('Measured white = blue trace; Summed guns = red trace')%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Calculate and save spectra of displayload coneSpectra;spectraWavelength = 380:730;coneSpectra = coneSpectra(11:361,:);sampling = wavelengths(2) - wavelengths(1);monitorSpectra = interp1(wavelengths, gunSpects, spectraWavelength)/sampling;RGB2XYZ2 = gunXYZ(:, 1:3);RGB2LMS = coneSpectra' * monitorSpectra(:,1:3);save SpectraFeb98.mat monitorSpectra spectraWavelength gunSpects sampling wavelengths coneSpectra gunColors monitor targetSize synchFreq gunXYZ;