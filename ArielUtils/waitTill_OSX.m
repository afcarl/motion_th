function [key,StartTime] = waitTill_OSX(ReturnTime,display,StartTime)%Waits and listens to keyboard presses.%%Inputs:%%  time:       WaitTill waits 'time' seconds after StartTime before%              returning.%%  StartTime:  Number of seconds since the system started up.%              If not given, WaitTill gets a new StartTime.%%Outputs:%  %  key         last key pressed during waiting period.%%Example:%%StartTime = getSecs;%ReturnTime = 5; %seconds%key = WaitTill(ReturnTime,StartTime);%disp(['key ',key,' was the last key pressed during the ',num2str(ReturnTime),' second interval.']);%%SEE ALSO:  getSecs%5/31/97 gmb Wrote it.%1/10/98 gmb Revised it for verstion 5if nargin == 2	StartTime = GetSecs;endkey = '';if ReturnTime < GetSecs-StartTime	[a,b,key] = PsychHID('KbCheck',display.keyboarddevnum);  	%disp(['Warning!  WaitTill: ReturnTime (' num2str(ReturnTime) ...%		  ') passed before waiting begins (at ' ...%		  num2str(GetSecs-StartTime) ').']);	returnendwhile(GetSecs < StartTime+ReturnTime)	WaitSecs(.001);    [a,b,key] = PsychHID('KbCheck',display.keyboarddevnum);end