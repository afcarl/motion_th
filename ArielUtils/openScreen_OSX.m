function display = openScreen_OSX(display)bkColorNum = findName(display.reservedColor,'background');%refreshrate = Screen('GetFlipInterval',display.screenNumber,200)%Screen('LoadNormalizedGammaTable', display.screenNumber, display.gammaTable);if isfield(display,'thisRect')    [display.windowPtr,display.rect]=Screen('OpenWindow',display.screenNumber ,[], display.thisRect ,[] ,2);else    [display.windowPtr,display.rect] = Screen('OpenWindow',display.screenNumber,[],[],[],2);end%Screen('FillRect',display.windowPtr,display.reservedColor(bkColorNum).gunVal);%Screen('Flip',display.windowPtr);devices = PsychHID('Devices');display.keyboarddevnum = []; display.keypaddevnum = [];if (strcmp(display.computerName,'scanner_mac') == 1 | ...        strcmp(display.computerName,'goggles') == 1)    for devicecounter = 1:length(devices)        if strcmp(devices(devicecounter).usageName,'Keyboard') == 1 & devices(devicecounter).vendorID == 1452            display.keyboarddevnum = devicecounter;        end        if devices(devicecounter).vendorID == 1240            display.forpnum = devicecounter;            display.keypaddevnum = devicecounter;        end    endelseif strcmp(display.computerName,'Minor_582D') == 1 %582D Minor    for devicecounter = 1:length(devices)        if (strcmp(devices(devicecounter).product, 'Apple Extended USB Keyboard') == 1) & (devices(devicecounter).inputs == 270) %582D            display.keyboarddevnum = devicecounter;        end        if (strcmp(devices(devicecounter).product, 'USB Keyboard Hub') == 1) & (devices(devicecounter).inputs == 270) %582D            display.keypaddevnum = devicecounter;        end        if devices(devicecounter).vendorID == 1240 %FORP            display.forpnum = devicecounter;        end        if (strcmp(devices(devicecounter).product,'USB-1208FS') == 1) & (devices(devicecounter).outputs == 70) % USB-1208FS            display.daqnum = devicecounter;        end    endelseif strcmp(display.computerName,'Minor_404_eye_tracking') == 1    for devicecounter = 1:length(devices)        if (strcmp(devices(devicecounter).product, 'Apple Extended USB Keyboard') == 1) & (devices(devicecounter).inputs == 270) %582D            display.keyboarddevnum = devicecounter;        end        if (strcmp(devices(devicecounter).product,'USB Receiver') == 1) & (devices(devicecounter).vendorID == 1133) % wireless keyboard in Minor 404            display.wirelessnum = devicecounter;        end    endelseif strcmp(display.computerName,'ariel_macbook') == 1    for devicecounter = 1:length(devices)        if devices(devicecounter).vendorID == 6171  %FORP            display.forpnum = devicecounter;        end    endend